{% extends 'base.html' %}
{% block content %}
<div class="container">
  <h1>Patients</h1>
  <form class="toolbar" method="get" aria-label="Search patients">
    <label for="q" class="visually-hidden">Search</label>
    <input id="q" name="q" value="{{ q }}" placeholder="Search by name or NHS number" aria-label="Search patients">
    <button class="btn" type="submit">Search</button>
    <a class="btn secondary" href="{{ url_for('main.patients_new') }}">Add patient</a>
  </form>
  <table role="grid">
    <thead>
      <tr>
        <th scope="col">NHS number</th>
        <th scope="col">Name</th>
        <th scope="col">DOB</th>
        <th scope="col">Actions</th>
      </tr>
    </thead>
    <tbody>
    {% for p in patients %}
      <tr>
        <td>{{ p.nhs_number }}</td>
        <td>{{ p.full_name }}</td>
        <td>{{ p.date_of_birth.strftime('%Y-%m-%d') }}</td>
        <td>
          <a class="btn small" href="{{ url_for('main.patients_edit', patient_id=p.id) }}">Edit</a>
          <form class="inline" method="post" action="{{ url_for('main.patients_delete', patient_id=p.id) }}">
            <button class="btn small danger" data-confirm="Are you sure?">Delete</button>
          </form>
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
